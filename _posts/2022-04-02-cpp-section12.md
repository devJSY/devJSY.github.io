---
published: true
title:  "ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 12. ê°€ìƒ í•¨ìˆ˜ë“¤"
excerpt: ""

categories:
  - ë”°ë°°ì”¨++
tags:
  - [C++]

toc: true
toc_sticky: true
 
date: 2022-04-28 
last_modified_at: 2022-04-28
---

# ğŸ¤” í•™ìŠµëª©í‘œ
- ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 12. ê°€ìƒ í•¨ìˆ˜ë“¤

# ğŸ“ƒ í•™ìŠµë‚´ìš©
## ğŸ“ **ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 12. ê°€ìƒ í•¨ìˆ˜ë“¤**

### **ğŸŒ± 12.1 ë‹¤í˜•ì„±ì˜ ê¸°ë³¸ ê°œë…**

- ìì‹ í´ë˜ìŠ¤ì˜ ê°ì²´ì— ë¶€ëª¨ í´ë˜ìŠ¤ì˜ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´?

```cpp
#include <iostream>
#include <string>

using namespace std;

class Animal
{
protected:
	string m_name;

public:
	Animal(std::string name)
		:m_name(name)
	{}

public:
	string getName() { return m_name; }

	void speak() const
	{
		cout << m_name << " ??? " << endl;
	}
};

class Cat : public Animal
{
public:
	Cat(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Meow " << endl;
	}
};

class Dog : public Animal
{
public:
	Dog(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Woof " << endl;
	}
};

int main()
{
	Animal animal("My animal");
	Cat cat("My cat");
	Dog dog("My dog");

	animal.speak();
	cat.speak();
	dog.speak();

	Animal* ptr_animal1 = &cat;
	Animal* ptr_animal2 = &dog;

	ptr_animal1->speak();
	ptr_animal2->speak();

	//My animal ? ? ?
	//My cat Meow
	//My dog Woof
	//My cat ? ? ?
	//My dog ? ? ?


	return 0;
}
```

- ìì‹í´ë˜ìŠ¤ë¥¼ ë¶€ëª¨í´ë˜ìŠ¤ì˜ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºìŠ¤íŒ…í•˜ì—¬ í˜¸ì¶œí•˜ë©´ ìì‹ ì´ ë¶€ëª¨í´ë˜ìŠ¤ë¡œ ì¸ì‹í•˜ì—¬ í˜¸ì¶œí•¨

___


```cpp
#include <iostream>
#include <string>

using namespace std;

class Animal
{
protected:
	string m_name;

public:
	Animal(std::string name)
		:m_name(name)
	{}

public:
	string getName() { return m_name; }

	void speak() const
	{
		cout << m_name << " ??? " << endl;
	}
};

class Cat : public Animal
{
public:
	Cat(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Meow " << endl;
	}
};

class Dog : public Animal
{
public:
	Dog(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Woof " << endl;
	}
};

int main()
{
	Cat cats[] = { Cat("cat1"), Cat("cat2"), Cat("cat3"), Cat("cat4"), Cat("cat5") };
	Dog dogs[] = { Dog("dog1"),Dog("dog2") };

  Animal* my_animals[] = { &cats [0],&cats[1] ,&cats[2] ,&cats[3] ,&cats[4],
	&dogs[0],& dogs[1] };

	for (int i = 0; i < 7; ++i)
		my_animals[i]->speak();

    // cat1 ???
    // cat2 ???
    // cat3 ???
    // cat4 ???
    // cat5 ???
    // dog1 ???
    // dog2 ???

	return 0;
}
```

- ìƒì†ë°›ì€ ë¶€ëª¨í´ë˜ìŠ¤ê°€ ê°™ê¸° ë•Œë¬¸ì— `my_animals[]` ì•ˆì— catsì™€ dogs ë¥¼ ê°™ì´ë„£ì„ìˆ˜ ìˆìŒ

**virtual**

```cpp
#include <iostream>
#include <string>

using namespace std;

class Animal
{
protected:
	string m_name;

public:
	Animal(std::string name)
		:m_name(name)
	{}

public:
	string getName() { return m_name; }

	virtual void speak() const
	{
		cout << m_name << " ??? " << endl;
	}
};

class Cat : public Animal
{
public:
	Cat(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Meow " << endl;
	}
};

class Dog : public Animal
{
public:
	Dog(string name)
		: Animal(name)
	{}

	void speak() const
	{
		cout << m_name << " Woof " << endl;
	}
};

int main()
{
	Cat cats[] = { Cat("cat1"), Cat("cat2"), Cat("cat3"), Cat("cat4"), Cat("cat5") };
	Dog dogs[] = { Dog("dog1"),Dog("dog2") };

	Animal* my_animals[] = { &cats [0],&cats[1] ,&cats[2] ,&cats[3] ,&cats[4],
	&dogs[0],& dogs[1] };

	for (int i = 0; i < 7; ++i)
		my_animals[i]->speak();

    // cat1 Meow
    // cat2 Meow
    // cat3 Meow
    // cat4 Meow
    // cat5 Meow
    // dog1 Woof
    // dog2 Woof

	return 0;
}
```

- `virtual void speak() const` ë¶€ëª¨í´ë˜ìŠ¤ì— ë©¤ë²„í•¨ìˆ˜ ì•ì— `virtual` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ë©´ ìì‹í´ë˜ìŠ¤ì¸ê²ƒ ì²˜ëŸ¼ ë™ì‘í•¨

### **ğŸŒ± 12.2 ê°€ìƒ í•¨ìˆ˜ì™€ ë‹¤í˜•ì„±**

- ê°€ìƒ í•¨ìˆ˜ Virtual Functions 
- ë‹¤í˜•ì„± Polymorphism

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	void print() { cout << "A" << endl; }
};

class B : public A
{
public:
	void print() { cout << "B" << endl; }
};

class C : public B
{
public:
	void print() { cout << "C" << endl; }
};

class D : public C
{
public:
	void print() { cout << "D" << endl; }
};
int main()
{
	A a;
	B b;
	C c;
	D d;

	A& ref = b;
	ref.print(); // A

	return 0;
}
```

- ë ˆí¼ëŸ°ìŠ¤ë¥¼ Aì— ë’€ë‹¤ëŠ” ì´ìœ ë¡œ Aë¡œ ì¶œë ¥ë¨
- í¬ì¸í„°ë¡œ í•´ë„ ë™ì¼í•¨

**virtual**

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print() { cout << "A" << endl; }
};

class B : public A
{
public:
	void print() { cout << "B" << endl; }
};

class C : public B
{
public:
	void print() { cout << "C" << endl; }
};

class D : public C
{
public:
	void print() { cout << "D" << endl; }
};
int main()
{
	A a;
	B b;
	C c;
	D d;

	A& ref = b;
	ref.print(); // B

	return 0;
}
```

- Bí´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ Aë¡œ ë„£ì—ˆëŠ”ë° Aì•ˆì—ìˆëŠ” print()ê°€ virtual ì¼ê²½ìš° Bí´ë˜ìŠ¤ì˜ print() ê°€ ì‹¤í–‰ì´ë¨
- ë ˆí¼ëŸ°ìŠ¤ì— cë¥¼ ë„£ì–´ë„ Cê°€ ì¶œë ¥ë¨ Aì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ í†µí•´ì„œ print()ë¥¼ í˜¸ì¶œí–ˆì„ë•Œ Bë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ì•„ë‹Œ Cë¥¼ ì‚¬ìš©í•¨
- ì‹¤ë¬´ì—ì„œ ê¸°ì–µì•ˆë‚ ë• ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë§Œë“¤ê³  ì‹¤í–‰ì‹œì¼œì„œ í…ŒìŠ¤íŠ¸í•´ë³´ê³  ë¬¸ë²• ë˜ìƒˆê¹€í•˜ê¸°

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print() { cout << "A" << endl; }
};

// class B
class B : public A
{
public:
	void print() { cout << "B" << endl; }
};

class C : public B
{
public:
	void print() { cout << "C" << endl; }
};

class D : public C
{
public:
	void print() { cout << "D" << endl; }
};
int main()
{
	A a;
	B b;
	C c;
	D d;

	B& ref = c;
	ref.print(); // C

	return 0;
}
```

- ìƒì†ë‹¨ê³„ë¥¼ ëŠì—ˆì„ë•ŒëŠ” Bê°€ ì¶œë ¥ì´ë¨
- ê°€ì¥ ìƒìœ„í´ë˜ìŠ¤ì— ìˆëŠ”ê²Œ virtualì´ ë˜ë©´ í•˜ìœ„ í´ë˜ìŠ¤ë“¤ë„ virtualì´ ì ìš©ì´ë¨
  - ê´€ìŠµì ìœ¼ë¡œ í•˜ìœ„ í´ë˜ìŠ¤ì—ë„ virtual ì„ ì ì–´ì¤Œ

**ì˜¤ë²„ë¼ì´ë”©ì‹œ ë¦¬í„´íƒ€ì…ì´ ë‹¤ë¥¼ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•¨**

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print() { cout << "A" << endl; }
};

class B : public A
{
public:
	virtual void print() { cout << "B" << endl; }
};

class C : public B
{
public:
	virtual void print() { cout << "C" << endl; }
};

class D : public C
{
public:
	virtual int print() { cout << "D" << endl;  return 0; } // Error
};

int main()
{
	A a;
	B b;
	C c;
	D d;

	B& ref = c;
	ref.print(); // C

	return 0;
}
```

- ë§ìœ¼ë©´ 3ë‹¨ê³„ ë³´í†µ 2ë‹¨ê³„ virtual í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•¨
- virtual í…Œì´ë¸”ì—ì„œ í•¨ìˆ˜ë¥¼ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì„ ê±°ì¹¨
  - í˜¸ì¶œì´ ë¹ˆë²ˆí•œ í•¨ìˆ˜ì— ì‚¬ìš©í•˜ë©´ í¼í¬ë¨¼ìŠ¤ê°€ ì•ˆì¢‹ìŒ
  - for roop ì•ˆì— ë„£ìœ¼ë©´ í˜„ì €íˆ ëŠë ¤ì§

### **ğŸŒ± 12.3 override, final, ê³µë³€ ë°˜í™˜ê°’**

- ê³µë³€ ë°˜í™˜ ê°’ Covariant

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print(int x) { cout << "A" << endl; }
};

class B : public A
{
public:
	virtual void print(short x) { cout << "B" << endl; }
};


int main()
{
	A a;
	B b;

	A& ref = b;
	ref.print(1); // A

	return 0;
}
```

- Aê°€ ì¶œë ¥ë˜ëŠ” ì´ìœ 
- í•¨ìˆ˜ëŠ” íŒŒë¼ë©”íƒ€ê°€ ë‹¤ë¥´ë©´ ì˜¤ë²„ë¼ì´ë”©ì„ í• ìˆ˜ê°€ ì—†ìŒ

___

**override**

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print(int x) { cout << "A" << endl; }
};

class B : public A
{
public:
	virtual void print(short x) override { cout << "B" << endl; } // Error
};


int main()
{
	A a;
	B b;

	A& ref = b;
	ref.print(1); // A

	return 0;
}
```
- ì˜ˆë¹„ì¡°ì¹˜ë¡œ overrideë¥¼ ì¹˜ë©´ë¨
  - ë¯¸ë¦¬ ì—ëŸ¬ë¥¼ ì¡ì„ìˆ˜ ìˆìŒ
- ìì‹í´ë˜ìŠ¤ì—ì„œ ì–´ë–¤í•¨ìˆ˜ë¥¼ êµ¬í˜„í• ë•Œ ìƒìœ„í´ë˜ìŠ¤ì— virtual í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ê³ ì‹¶ì€ê±°ë¼ë©´ overrideë¥¼ ì ì–´ ì´í•¨ìˆ˜ëŠ” ë¬´ì¡°ê±´ ì˜¤ë²„ë¼ì´ë“œ í•´ì•¼í•œë‹¤ê³  ì»´íŒŒì¼ëŸ¬ì—ê²Œ ë¯¸ë¦¬ ì•Œë ¤ì£¼ëŠ”ê²ƒ
- const, í•¨ìˆ˜ì´ë¦„ ë“±ì„ ë‹¤ë¥´ê²Œí–ˆì„ë•Œ ì°¾ì„ìˆ˜ ìˆìŒ

___

**final**

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	virtual void print() { cout << "A" << endl; }
};

class B : public A
{
public:
	virtual void print() final { cout << "B" << endl; }
};

class C : public B
{
public:
	virtual void print() final { cout << "C" << endl; } // Error
};


int main()
{
	A a;
	B b;

	A& ref = b;
	ref.print(); 

	return 0;
}
```

- ë°‘ì—ì„œ overrideë¥¼ ëª»í•˜ê²Œ ë§‰ì•„ë²„ë¦¬ê³ ì‹¶ì„ë•Œ ì‚¬ìš©í•˜ëŠ” í‚¤ì›Œë“œ

```cpp
#include <iostream>

using namespace std;

class A
{
public:
	void print() { cout << "A" << endl; }
	virtual A* getThis() { 
		cout << "B::getThis()" << endl; 
		return this; }
};

class B : public A
{
public:
	void print() { cout << "B" << endl; }
	virtual B* getThis() { 
		cout << "B::getThis()" << endl;
		return this; }
};

int main()
{
	A a;
	B b;

	A& ref = b;
	b.getThis()->print();
	ref.getThis()->print();

	cout << typeid(b.getThis()).name() << endl;
	cout << typeid(ref.getThis()).name() << endl;

  // B::getThis()
  // B
  // B::getThis()
  // A
  // class B * __ptr64
  // class A * __ptr64

	return 0;
}
```

- ë ˆí¼ëŸ°ìŠ¤ ê°€ Aì´ê¸° ë•Œë¬¸ì— Bì˜ í¬ì¸í„°ë¥¼ ë¦¬í„´í•´ì¤˜ë„ ë‚´ë¶€ì ìœ¼ë¡œ Aí¬ì¸í„°ë¡œ ë³€í™˜í•œ ë‹¤ìŒì— í˜¸ì¶œí•˜ëŠ” êµ¬ì¡°ì„

### **ğŸŒ± 12.4 ê°€ìƒ ì†Œë©¸ì**

```cpp
#include <iostream>

using namespace std;

class Base
{
public:
	~Base()
	{
		cout << "~Base()" << endl;
	}
};

class Dericed :public Base
{
private:
	int* m_array;

public:
	Dericed(int length)
	{
		m_array = new int[length];
	}

	~Dericed()
	{
		cout << "~Dericed()" << endl;
		delete[] m_array;
	}
};

int main()
{
	Dericed dericed(5);

	//~Dericed()
	//~Base()

	return 0;
}
```

- ì†Œë©¸ì í˜¸ì¶œìˆœì„œëŠ” ìƒì„±ì í˜¸ì¶œìˆœì„œì˜ ë°˜ëŒ€ì„

**ë‹¤í˜•ì„± êµ¬ì¡°**

```cpp
#include <iostream>

using namespace std;

class Base
{
public:
	~Base()
	{
		cout << "~Base()" << endl;
	}
};

class Dericed :public Base
{
private:
	int* m_array;

public:
	Dericed(int length)
	{
		m_array = new int[length];
	}

	~Dericed()
	{
		cout << "~Dericed()" << endl;
		delete[] m_array;
	}
};

int main()
{
	Dericed* dericed = new Dericed(5);
	Base* base = dericed;
	delete base;

  // ~Base()

	return 0;
}
```

- baseì˜ ì†Œë©¸ìë§Œ ìƒì„±ì´ë¨
  - ë©”ëª¨ë¦¬ ë¦­ì´ ìƒê¹€
  - ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ìœ¼ë¡œ í•´ê²°ë¨

___

**ì†Œë©¸ìì— virtualí‚¤ì›Œë“œ**

```cpp
#include <iostream>

using namespace std;

class Base
{
public:
	virtual ~Base()
	{
		cout << "~Base()" << endl;
	}
};

class Dericed :public Base
{
private:
	int* m_array;

public:
	Dericed(int length)
	{
		m_array = new int[length];
	}

	virtual ~Dericed() override
	{
		cout << "~Dericed()" << endl;
		delete[] m_array;
	}
};

int main()
{

	Dericed* dericed = new Dericed(5);
	Base* base = dericed;
	delete base;

  // ~Dericed()
  // ~Base()

	return 0;
}
```

- virtualì„ ë–¼ë©´ `override` ë¥¼ ì ì—ˆì„ë•Œ ì—ëŸ¬ê°€ ë°œìƒí•¨

### **ğŸŒ± **

### **ğŸŒ± **

### **ğŸŒ± **

### **ğŸŒ± **

### **ğŸŒ± **

### **ğŸŒ± **

### **ğŸŒ± **

# ğŸ“Œì°¸ì¡°ë§í¬
ì¸í”„ëŸ° **ë”°ë¼í•˜ë©´ì„œ ë°°ìš°ëŠ” C++** - [https://www.inflearn.com/course/following-c-plus](https://www.inflearn.com/course/following-c-plus)