---
published: true
title:  "ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 14. ì˜ˆì™¸ ì²˜ë¦¬"
excerpt: ""

categories:
  - ë”°ë°°ì”¨++
tags:
  - [C++]

toc: true
toc_sticky: true
 
date: 2022-05-01
last_modified_at: 2022-05-01
---

# ğŸ¤” í•™ìŠµëª©í‘œ
- ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 14. ì˜ˆì™¸ ì²˜ë¦¬

# ğŸ“ƒ í•™ìŠµë‚´ìš©
## ğŸ“ **ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++ Section 14. ì˜ˆì™¸ ì²˜ë¦¬**

### **ğŸŒ± 14.1 ì˜ˆì™¸ ì²˜ë¦¬ì˜ ê¸°ë³¸**

- Exception Handling

```cpp
#include <iostream>

using namespace std;

int findFirstchar(const char* string, char ch)
{
	for (size_t index = 0; index < strlen(string); ++index)
		if (string[index] == ch)
			return index;

	return -1; // no match
}

int main()
{

}
```

- ì°¾ì§€ëª»í•˜ë©´ -1ì„ ë¦¬í„´í•˜ëŠ” ì½”ë“œ
- char í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œ -1ì´ ë“¤ì–´ì˜¤ë©´ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì•¼í•˜ë‹ˆ ë¶ˆí¸í•¨

```cpp
#include <iostream>

using namespace std;

double divide(int x, int y, bool& success)
{
	if (y == 0)
	{
		success = false;
		return 0.0;
	}

	success = false;
	return static_cast<double>(x) / y;
}

int main()
{
	bool success;
	double result = divide(5, 3, success);

	if (!success)
		cerr << "An error occurred" << endl;
	else
		cout << "Result is " << result << endl;

}
```

- ë¶„ëª¨ yê°’ìœ¼ë¡œ 0ê°’ì´ ë“¤ì–´ì˜¤ë©´ `divide()` ì—ì„œ 0.0ì„ ë¦¬í„´í•˜ì—¬ mainì—ì„œ ì—ëŸ¬ì²˜ë¦¬

```cpp
#include <iostream>
#include <fstream>

int main()
{
	std::ifstream input_file("temp.txt");
	if (!input_file)
		std::cerr << "Cannot open file" << std::endl;

}
```

- ì¸í’‹íŒŒì¼ì„ ì´ˆê¸°í™” ì‹œë„í•˜ê³  ë¬¸ì œê°€ ìˆë‹¤ë©´ ì—ëŸ¬ì²˜ë¦¬

___

í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ìœ¼ë¡œ boolê°’ìœ¼ë¡œ ì„±ê³µí•˜ë©´ true ì‹¤íŒ¨í•˜ë©´ falseë¡œ ë¦¬í„´í•˜ëŠ” ê²½ìš°ë„ ìˆìŒ

___

**ìœ„ì™€ê°™ì€ë°©ì‹ ìœ¼ë¡œ C++ ì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ í–ˆë˜ ì´ìœ **
- í¼í¬ë¨¼ìŠ¤
- ë‹¤ë¥¸ ëŒ€ì²´í• ìˆ˜ìˆëŠ” ë¬¸ë²•ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì—

**try - throw - catch**

- ìœ„ì™€ê°™ì€ ì½”ë“œì˜ ì˜ˆì™¸ì²˜ë¦¬ ë°©ë²•ìœ¼ë¡œ ì™„ì „ ëŒ€ì²´í• ìˆ˜ìˆëŠ”ê±´ì•„ë‹˜
- ì•½ê°„ ëŠë ¤ì§
  - í¼í¬ë¨¼ìŠ¤ê°€ êµ‰ì¥íˆ ì¤‘ìš”í•œ ë¶€ë¶„ì—ì„œëŠ” try - throw - catch ë¥¼ ë„£ì§€ì•ŠìŒ
- ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ê³³ì€ ì˜ˆì¸¡í• ìˆ˜ì—†ëŠ”ì¼ì´ ë§ì´ ë°œìƒí•˜ëŠ” ê²½ìš°
  - ê²Œì„ ì„œë²„
  - ì¸í„°ë„· ì„œë²„
  
- **try**
  - ë¬´ì–¸ê°€ë¥¼ ì‹œë„í•˜ëŠ”ê²ƒ
- **throw**
  - ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤ëŠ” ê²ƒ
- **catch**
  - ë˜ì ¸ì§„ ì—ëŸ¬ë¥¼ ì¡ì•„ì„œ ì²˜ë¦¬í•œë‹¤ëŠ”ê²ƒ

___

**ì œê³±ê·¼ ê³„ì‚° ì½”ë“œ**

```cpp
#include <iostream>

using namespace std;

int main()
{
    double x;
    cin >> x;  // ìŒìˆ˜ ì…ë ¥ì‹œ ì˜ˆì™¸ ë°œìƒí•˜ë„ë¡
    
    try
    {
        if (x < 0.0) throw string("Negative input");
        
        cout << std::sqrt(x) << endl;
    }
    catch (string error_message)
    {
        cout << error_message << endl;
    }

    return 0;
}
```

- `try` ë¬¸ì œê°€ ìƒê¸¸ ì—¬ì§€ê°€ ìˆëŠ” ë¶€ë¶„ì— ì§‘ì–´ë„£ìŒ
  - `cout << std::sqrt(x) << endl;` ë¬¸ì œê°€ì—†ë‹¤ë©´ ì´ë¶€ë¶„ì´ ì‹¤í–‰ì´ë¨
- `throw` ë¬¸ì œê°€ ìƒê¸°ë©´ ì—¬ê¸°ë¡œ ë˜ì ¸ì¤Œ
- `catch` í•˜ëŠ”ìª½ì—ì„œ stringì„ ê°€ë¡œì±”
- ìŒìˆ˜ê°€ ì…ë ¥ë˜ë©´ `try` ì—ì„œ `throw` ë¡œ `"Negative input"` ì´ë¼ëŠ” string ì„ catchë¡œ ë˜ì ¸ì„œ error_messageì— ë„£ìŒ

___

**ì£¼ì˜ì‚¬í•­**

```cpp
int main()
{
    try
    {
        throw -1.0;
    }
    catch (int x) // Error
    {
        cout << "Catch Integer " << x << endl;
    }
    catch (string error_message)
    {
        cout << error_message << endl;
    }

    return 0;
}
```

- ëŸ°íƒ€ì„ ì—ëŸ¬ ë°œìƒ
  - catchì—ì„œ ì¡ì•„ ë„£ì–´ì•¼í•˜ëŠ”ë° throw ì—ì„œ ì£¼ëŠ”íƒ€ì…ì€ doubleì´ê³  ë°›ëŠ”íƒ€ì…ì€ intí˜•ì´ë¼ ì•ˆë§ì•„ì„œ ë¶ˆê°€ëŠ¥í•˜ì—¬ ì—ëŸ¬ë°œìƒ
- ìë™ ìºìŠ¤íŒ…ì„ ì•ˆí•´ì¤Œ
- í˜•ë³€í™˜ì„ ì—„ê²©í•˜ê²Œí•˜ê¸° ë•Œë¬¸ì— throwì—ì„œ ë˜ì§€ëŠ” íƒ€ì…ê³¼ catchì—ì„œ ë°›ëŠ” íƒ€ì…ì´ ê°™ì•„ì•¼í•¨

### **ğŸŒ± 14.2 ì˜ˆì™¸ì²˜ë¦¬ì™€ ìŠ¤íƒ ë˜ê°ê¸°**

- Stack Unwinding

- cout
  - ì¶œë ¥ì„ ë²„í¼ì— ë‹´ê³  endlì„ ë°›ìœ¼ë©´ í”ŒëŸ¬ì‰¬ë¥¼ ë°”ë¡œí•˜ê³  ì¤„ë°”ê¿ˆì„ í•˜ëŠ” ë‘ê°€ì§€ê¸°ëŠ¥ì„ ë™ì‹œì— ìˆ˜í–‰í•¨
- cerr
  - endl; ì—†ì–´ë„ ë°”ë¡œ ì¶œë ¥í•¨
- clog
- ê¸°ëŠ¥ìƒ ì°¨ì´ëŠ” ì—†ê³  3ê°€ì§€ ì±„ë„ì´ ìˆëŠ”ê²ƒ

```cpp
#include <iostream>
using namespace std;

void last()
{
	cout << "Last" << endl;  
	cout << "Throws exception" << endl; 

	throw - 1;
	cout << "End Last" << endl;
}

void third()
{
	cout << "Third" << endl; 

	last();

	cout << "End third" << endl;
}

void second()
{
	cout << "Second" << endl;

	try
	{
		third();
	}
	catch (double)
	{
		std::cerr << "Second caught double exception!" << endl;
	}
	cout << "End second" << endl;
};

void first()
{
	cout << "First" << endl;  

	try
	{
		second();
	}
	catch (int)
	{
		std::cerr << "first caught int exception!" << endl;
	}
	cout << "End first" << endl; 
}

int main()
{
	cout << "Start" << endl;  

	try
	{
		first();
	}
	catch (int)
	{
		std::cerr << "main caught int exception!" << endl; 
	}
	cout << "End of main" << endl; 

  // ì¶œë ¥ê²°ê³¼
  // Start
  // First
  // Second
  // Third
  // Last
  // Throws exception
  // first caught int exception!
  // End first
  // End of main
}
```

- first() ë“¤ì–´ê°€ê³  second() ë“¤ì–´ê° third() ë“¤ì–´ê° last() ë“¤ì–´ê° throw - 1 ì„ ë§Œë‚˜ê³  ë°‘ì— cout << `"End Last" << endl;` ë¥¼ ë¬´ì‹œí•˜ê³  first() ì˜ catch (int) ë¡œ ë°”ë¡œ ë“¤ì–´ì˜´
- ì—ëŸ¬ë¥¼ ëª»ì¡ì•˜ê¸°ë•Œë¬¸ì— `second();` í˜¸ì¶œí•˜ëŠ” ì•„ë«ë¶€ë¶„ ì½”ë“œëŠ”ì‹¤í–‰ì´ ì•ˆë¨ catchí•œ ê²½ìš°ì—ë§Œ ì‹¤í–‰í•¨

- `first()` ì˜ `catch (int)` ë¥¼ `catch (double)` ë¡œ ë°”ê¾¸ë©´ `main()`ì˜ `catch (int)` ì—ì„œ ì¡ìŒ
- `throw` ë¥¼ char íƒ€ì…ìœ¼ë¡œ ë˜ì§€ë©´ ëŸ°íƒ€ì„ì—ëŸ¬
  - ì²˜ë¦¬í—¤ì£¼ëŠ”ê²ƒì´ ì—†ê¸°ë•Œë¬¸ì—

___

**ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë‹¤ êµ¬í˜„í• ìˆ˜ ì—†ì„ë•Œ**
- `catch (...)`
  - `...` ellipses ë¼ê³ í•¨
  - ëª¨ë“  ê²½ìš°ì— ëŒ€í•´ ë‹¤ ì˜ˆì™¸ ì²˜ë¦¬í•˜ê² ë‹¤ëŠ” ëœ»ì„

```cpp
catch(...)
{
    cerr << "main caught ellipses exception" << endl;
}
```

___

**exception specifier**

```cpp
void last() throw(int)
{
	cout << "Last" << endl;  
	cout << "Throws exception" << endl; 

	throw 'a';

	cout << "End Last" << endl; 
}
```

- `int` í˜•ì„ throw í• ìˆ˜ë„ ìˆë‹¤ëŠ” ëœ»
  - ë¬´ì¡°ê±´ `int` í˜•ì„ throw í•œë‹¤ëŠ”ê²ƒì€ ì•„ë‹˜ 
- ms vs ë¬¸ì„œ - () ì•ˆì— ë­˜ ë„£ë“ ì§€ ê°„ì— (...) ì´ë¼ê³  ê°€ì •í•œë‹¤ê³ í•¨
- ì˜ˆì™¸ë¥¼ ë˜ì§ˆê°€ëŠ¥ì„±ì´ ìˆëŠ” í•¨ìˆ˜ë¼ëŠ” ëœ»
- `throw()` ì™€ ê°™ì´ íŒŒë¼ë©”íƒ€ê°€ ì—†ìœ¼ë©´ ì˜ˆì™¸ë¥¼ ì•ˆë˜ì§ˆêº¼ë‹¤ ë¼ëŠ” ëœ»ì´ë¨

### **ğŸŒ± 14.3 ì˜ˆì™¸ í´ë˜ìŠ¤ì™€ ìƒì†**

- ì‚¬ìš©ì ì •ì˜ ìë£Œí˜•

```cpp
#include <iostream>

using namespace std;

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw - 1;
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
}

int main()
{
    doSomething();

    cout << "main" << endl;

    // ì¶œë ¥ê²°ê³¼
    // Exception -1
    // main

    return 0;
}
```

___


```cpp
#include <iostream>

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int & operator [] (const int & index)
    {
        if (index < 0 || index >= 5) throw Exception();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;
    
    try
    {
        my_array[100];
    }
    catch (const int & x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (Exception & e)
    {
        e.report();
    }
}

int main()
{
   doSomething();

   cout << "main" << endl;

    return 0;

    // ì¶œë ¥ ê²°ê³¼
    // Exception report
    // main  
}
```

___

```cpp
#include <iostream>

using namespace std;

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class ArrayException : public Exception
{
public:
    void report()  // ì˜¤ë²„ë¼ì´ë”©
    {
        cerr << "Array Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw ArrayException();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (Exception& e)
    {
        e.report();
    }
}

int main()
{
    doSomething();

    cout << "main" << endl;

    // ì¶œë ¥ê²°ê³¼
    // Exception report
    // main

    return 0;
}
```

- throwë¡œ `ArrayException`ì„ ë˜ì¡Œì§€ë§Œ ë°›ëŠ”ìª½ì—ì„œ `Exception`ìœ¼ë¡œ ë°›ê¸°ë•Œë¬¸ì— `Exception`ì˜ `report()` ê°€ ì‹¤í–‰ì´ë¨
- ìƒì†êµ¬ì¡°ë¼ì„œ `ArrayException`ì„ ë˜ì¡Œì§€ë§Œ ë°›ëŠ”ìª½ì—ì„œ `Exception`ìœ¼ë¡œ ë°›ì„ìˆ˜ ìˆìŒ

___

**ì£¼ì˜ì‚¬í•­**

```cpp
void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (Exception& e)
    {
        e.report();
    }
    catch (ArrayException& e)
    {
        e.report();
    }
}
```

- ArrayExceptionì˜ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ë§Œë“¤ì–´ ì¤¬ëŠ”ë° ê²°ê³¼ê°’ì´ ë™ì¼í•¨
- ë¶€ëª¨í´ë˜ìŠ¤ê°€ ë¨¼ì € ìºì¹˜ë¥¼ í•´ë²„ë¦¬ë‹ˆê¹Œ ìì‹í´ë˜ìŠ¤ì—ì„œ ìºì¹˜ë¥¼ ëª»í•¨

```cpp
void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (ArrayException& e)
    {
        e.report();
    }
    catch (Exception& e)
    {
        e.report();
    }
}
```

- ArrayExceptionë¥¼ ìœ„ë¡œ ì˜¬ë ¤ì„œ ìˆœì„œë¥¼ ë°”ê¿”í•´ê²°í• ìˆ˜ ìˆìŒ

___

```cpp
#include <iostream>

using namespace std;

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class ArrayException : public Exception
{
public:
    void report()  // ì˜¤ë²„ë¼ì´ë”©
    {
        cerr << "Array Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw ArrayException();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (ArrayException& e)
    {
        cout << "doSomething()" << endl;
        e.report();
    }
    catch (Exception& e)
    {
        cout << "doSomething()" << endl;
        e.report();
    }
}

int main()
{
    try 
    {
        doSomething();
    }
    catch (ArrayException& e)
    {
        cout << "mian()" << endl;
        e.report();
    }

    //ì¶œë ¥ê²°ê³¼
    //doSomething()
    //Array Exception report
    
    return 0;
}
```

- `main()` ì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ë§Œë“¤ì–´ ì¤¬ëŠ”ë°ë„ `doSomething()` í•¨ìˆ˜ì—ì„œ ë¨¼ì € ìºì¹˜ê°€ ë˜ì–´ `main()` ì˜ ì˜ˆì™¸ì²˜ë¦¬ëŠ” ì‘ë™í•˜ì§€ì•ŠìŒ

**rethrow**

```cpp
#include <iostream>

using namespace std;

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class ArrayException : public Exception
{
public:
    void report()  // ì˜¤ë²„ë¼ì´ë”©
    {
        cerr << "Array Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw ArrayException();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    catch (ArrayException& e)
    {
        cout << "doSomething()" << endl;
        e.report();
        throw e; // rethrow
    }
    catch (Exception& e)
    {
        cout << "doSomething()" << endl;
        e.report();
    }
}

int main()
{
    try 
    {
        doSomething();
    }
    catch (ArrayException& e)
    {
        cout << "mian()" << endl;
        e.report();
    }

    //ì¶œë ¥ê²°ê³¼
    //doSomething()
    //Array Exception report
    //mian()
    //Array Exception report
    
    return 0;
}
```

- ë¬¸ë²•ì€ ë™ì¼í•¨ `doSomething()`ì—ì„œ ìºì¹˜í›„ `throw e;` ì„ í•´ì£¼ë©´ `main()` ì˜ ì˜ˆì™¸ì²˜ë¦¬ê°€ ë°œë™í•¨

___

**rethrow ê°ì²´ì˜ë¦¼**

```cpp
#include <iostream>

using namespace std;

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class ArrayException : public Exception
{
public:
    void report()  // ì˜¤ë²„ë¼ì´ë”©
    {
        cerr << "Array Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw ArrayException();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    //catch (ArrayException& e)
    //{
    //    cout << "doSomething()" << endl;
    //    e.report();
    //    throw e; // rethrow
    //}
    catch (Exception& e)
    {
        cout << "doSomething()" << endl;
        e.report();
        throw e;
    }
}

int main()
{
    try 
    {
        doSomething();
    }
    catch (ArrayException& e)
    {
        cout << "mian()" << endl;
        e.report();
    }
    catch (Exception& e)
    {
        cout << "mian()" << endl;
        e.report();
    }

    //ì¶œë ¥ê²°ê³¼
    //doSomething()
    //Exception report
    //mian()
    //Exception report

    return 0;
}
```

- `doSomething()` í•¨ìˆ˜ì—ì„œ ìì‹í´ë˜ìŠ¤ë¡œ ë°›ì•„ì„œ rethrowë¥¼ í•´ì„œ ê°ì²´ì˜ë¦¼ì´ë˜ì–´ `main()`ì—ì„œ ìì‹í´ë˜ìŠ¤ë¡œ ì˜ˆì™¸ì²˜ë¦¬ê°€ ë¨

___

**rethrow ê°ì²´ì˜ë¦¼ì—†ì´ ë³´ë‚´ê¸°**

```cpp
#include <iostream>

using namespace std;

class Exception
{
public:
    void report()
    {
        cerr << "Exception report" << endl;
    }
};

class ArrayException : public Exception
{
public:
    void report()  // ì˜¤ë²„ë¼ì´ë”©
    {
        cerr << "Array Exception report" << endl;
    }
};

class MyArray
{
private:
    int m_data[5];
public:
    int& operator [] (const int& index)
    {
        if (index < 0 || index >= 5) throw ArrayException();
        return m_data[index];
    }
};

void doSomething()
{
    MyArray my_array;

    try
    {
        my_array[100];
    }
    catch (const int& x)
    {
        cerr << "Exception " << x << endl;
    }
    //catch (ArrayException& e)
    //{
    //    cout << "doSomething()" << endl;
    //    e.report();
    //    throw e; // rethrow
    //}
    catch (Exception& e)
    {
        cout << "doSomething()" << endl;
        e.report();
        throw;
    }
}

int main()
{
    try 
    {
        doSomething();
    }
    catch (ArrayException& e)
    {
        cout << "mian()" << endl;
        e.report();
    }
    catch (Exception& e)
    {
        cout << "mian()" << endl;
        e.report();
    }

    //ì¶œë ¥ê²°ê³¼
    //doSomething()
    //Exception report
    //mian()
    //Array Exception report

    return 0;
}
```

- ìì‹ í´ë˜ìŠ¤ì—ì„œ `throw` ë¥¼ ê·¸ëŒ€ë¡œ ì ì–´ì£¼ë©´ ê°ì²´ì˜ë¦¼ì´ ë°œìƒí•˜ì§€ì•ŠìŒ
- ë°›ì€ê²ƒ ê·¸ëŒ€ë¡œ í†µíŠ•ê²¨ ë³´ë‚¸ë‹¤ëŠ” ëŠë‚Œìœ¼ë¡œ ë¶€ëª¨í´ë˜ìŠ¤ ë¡œ ë³´ë‚¸ê²ƒ ê·¸ëŒ€ë¡œ ë°›ì•„ì„œ ë³´ë‚¼ìˆ˜ ìˆìŒ

### **ğŸŒ± 14.4 exception ì†Œê°œ**

- std::exception
- ë‹¤ì–‘í•œ ê²½ìš°ì˜ ì˜ˆì™¸ì— êµ¬í˜„ì´ ë˜ì–´ìˆìŒ

```cpp
#include <iostream>
#include <string>
#include <exception>

int main()
{
   try
   {
       std::string s;
       s.resize(-1);  // ì˜ˆì™¸ ë°œìƒ
   }
   catch (std::exception & e)
   {
       std::cout << typeid(e).name() << std::endl;
       std::cerr << e.what() << std::endl;
   }
   
   return 0;
  
  // ì¶œë ¥ ê²°ê³¼
  // class std::length_error
  // string too long
}
```

- ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒë˜ì–´ `string too long` ì´ ëœ¸
- `catch (std::exception & e)` ì˜ e ê°€ ë¶€ëª¨í´ë˜ìŠ¤ì„
- `typeid(e).name()` ë¡œ ìì‹í´ë˜ìŠ¤ ì´ë¦„ ì°¾ì•„ë‚¼ìˆ˜ ìˆìŒ

**length_error ì§ì ‘ catchí•˜ê¸°**

```cpp
#include <iostream>
#include <string>
#include <exception>

int main()
{
    try
    {
        std::string s;
        s.resize(-1);  // ì˜ˆì™¸ ë°œìƒ
    }
    catch (std::length_error& e)
    {
        std::cout << "length_error" << std::endl;
        std::cerr << e.what() << std::endl;
    }
    catch (std::exception& e)
    {
        std::cout << typeid(e).name() << std::endl;
        std::cerr << e.what() << std::endl;
    }

    // ì¶œë ¥ ê²°ê³¼
    // length_error
    // string too long

    return 0;
}
```

___

```cpp
#include <iostream>
#include <string>
#include <exception>

int main()
{
    try
    {
        throw std::runtime_error("Bad thing happened");
    }

    catch (std::exception& e)
    {
        std::cout << typeid(e).name() << std::endl;
        std::cerr << e.what() << std::endl;
    }

    //ì¶œë ¥ê²°ê³¼
    //class std::runtime_error
    //Bad thing happened

    return 0;
}
```

- `throw std::runtime_error("Bad thing happened");` ì™€ ê°™ì´ std:;exceptionì— ì •ì˜ë˜ì–´ìˆëŠ” ê²ƒì„ ê°€ì ¸ë‹¤ ì“¸ìˆ˜ë„ìˆìŒ

___

```cpp
#include <iostream>
#include <string>
#include <exception>

class CustomException : public std::exception
{
public:
    const char * what() const noexcept override
    {
        return "Custom exception";
    }
};

int main()
{
   try
   {
       throw CustomException();  // ì˜ˆì™¸ ë°œìƒ
   }
   catch (std::exception & e)
   {
       std::cout << typeid(e).name() << std::endl;
       std::cerr << e.what() << std::endl;
   }
   
   return 0;

  //  ì¶œë ¥ ê²°ê³¼
  //  class CustomException
  //  Custom exception
}
```

- ì§ì ‘ë§Œë“  CustomExceptionê°€ std::exceptionì´ ë‹¤ë¥¸ ìì‹ë“¤ì²˜ëŸ¼ ì‘ë™ë˜ê¸¸ ì›í•œë‹¤ë©´ what() í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì¤˜ì•¼í•¨
- `noexcept` C++11 ì´ìƒ ì»´íŒŒì¼ëŸ¬ ì‚¬ìš©ì‹œ ë„£ì–´ì•¼í•¨
  - ì´ í•¨ìˆ˜ ì•ˆì—ì„œëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•Šê² ë‹¤ëŠ” ëœ»

- what() í•¨ìˆ˜: ì˜ˆì™¸ ì¢…ë¥˜ì— ë§ëŠ” ì—ëŸ¬ ì›ì¸ ë©”ì„¸ì§€ë¥¼ ë¦¬í„´í•˜ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” í•¨ìˆ˜
  - ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë¦¬í„´ í•¨ìœ¼ë¡œ ë¦¬í„´ íƒ€ì…ì€ `cosnt char *`
- std::exception í´ë˜ìŠ¤ì˜ ëª¨ë“  ìì‹ í´ë˜ìŠ¤ëŠ” virtual ê°€ìƒ í•¨ìˆ˜ì¸ what() í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•œë‹¤.

### **ğŸŒ± 14.5 í•¨ìˆ˜ try**

**í•¨ìˆ˜ try ì‚¬ìš© ì•ˆí• ë•Œ**

```cpp
#include <iostream>
#include <exception>

using namespace std;

void doSomething()
{
    try
    {
        throw - 1;
    }
    catch (...)
    {
        cout << "Catch in doSomething()" << endl;
    }
}
int main()
{
    try
    {
        doSomething();
    }
    catch (...)
    {
        std::cout << "Catch in main()" << std::endl;
    }

    return 0;
}
```

**í•¨ìˆ˜ try**

```cpp
#include <iostream>
#include <exception>

using namespace std;

void doSomething()
try
{
    throw - 1;
}
catch (...)
{
    cout << "Catch in doSomething()" << endl;
}

int main()
{
    try
    {
        doSomething();
    }
    catch (...)
    {
        std::cout << "Catch in main()" << std::endl;
    }

    return 0;
}
```

- ë¸”ëŸ­ ì „ì²´ì— ëŒ€í•´ì„œ í•¨ìˆ˜ ë°”ë””ì— ì „ì²´ì— ëŒ€í•´ì„œ try catchë¥¼ ë¶™ì¼ìˆ˜ ìˆìŒ
- ë§ì´ ì•ˆì“°ëŠ” ë°©ë²•ì„
___

**í•¨ìˆ˜ try x**

```cpp
#include <iostream>
#include <exception>

class A
{
private:
    int m_x;
public:
    A(int x) : m_x(x)
    {
        if (x == 0)
            throw 1;
    }
};

class B : public A
{
public:
    B(int x)
        : A(x)
    {}
};

int main()
{
   try
   {
       B b(0);
   }
   catch (...)
   {
       std::cout << "Catch in main()" << std::endl;
   }
   
   return 0;

  //  ì¶œë ¥ê²°ê³¼
  //  Catch in main()
}
```

**í•¨ìˆ˜ try**

```cpp
#include <iostream>
#include <exception>

class A
{
private:
    int m_x;
public:
    A(int x) : m_x(x)
    {
        if (x == 0)
            throw 1;
    }
};

class B : public A
{
public:
    B(int x) try : A(x)
    {}

    catch(...)
    {
        std::cout << "Catch in B constructor" << std::endl;
        // throw
    }
};

int main()
{
   try
   {
       B b(0);
   }
   catch (...)
   {
       std::cout << "Catch in main()" << std::endl;
   }
   
   return 0;

  //  ì‹¤í–‰ê²°ê³¼
  //  Catch in B constructor
  //  Catch in main()
}
```

- `B(int x) try : A(x)` 
- `class B` ì—ì„œ throwê°€ ì—†ì§€ë§Œ ìˆëŠ”ê²ƒì²˜ëŸ¼ ì‘ë™í•˜ëŠ”ê²ƒ
- ìƒì„±ìì—ì„œ í•¨ìˆ˜ tryë¥¼ ì‚¬ìš©í–ˆì„ë• ìƒì„±ìì—ì„œí•œë²ˆì¡ê³  `main()`ì—ì„œë„ ì¡ì„ìˆ˜ ìˆìŒ

### **ğŸŒ± 14.6 ì˜ˆì™¸ì²˜ë¦¬ì˜ ìœ„í—˜ì„±ê³¼ ë‹¨ì **

**1. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí• ìˆ˜ ìˆìŒ**

```cpp
#include <iostream>
using namespace std;

int main()
{
	try
	{
		int * i = new int[1000000];  // í° ë©”ëª¨ë¦¬ í• ë‹¹

		throw "error";

		delete[] i;
	}
	catch (...)
	{
		cout << "Catch" << endl;
	}
	return 0;
}
```

- ì •ìƒì ì¸ìƒí™©ì—ì„  deleteê°€ ë˜ì§€ë§Œ ì˜ˆì™¸ê°€ ë°œìƒì´ë˜ë©´ throwê°€ ë°œë™ë˜ì–´ catchë¡œ ë„˜ì–´ê°€ì„œ catchì—ì„œ ië¡œ ì ‘ê·¼í• ìˆ˜ê°€ ì—†ê¸°ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí• ìˆ˜ ìˆìŒ

**ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°**

```cpp
#include <iostream>
#include <memory> // 
using namespace std;

int main()
{
	try
	{
		int * i = new int[1000000];
		unique_ptr<int> up_i(i); // ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°

		throw "error";

		// delete[] i; ì—†ì–´ë„ ë¨
	}
	catch (...)
	{
		cout << "Catch" << endl;
	}
	return 0;
}
```

- `up_i` ë³€ìˆ˜ëª… ì•„ë¬´ê±°ë‚˜ ì§€ì–´ë„ë¨
- ì˜ì—­ì„ ë²—ì–´ë‚ ë•Œ `unique_ptr` ê°€ ì•Œì•„ì„œ ë©”ëª¨ë¦¬ë¥¼ ì§€ì›Œì¤Œ throwë˜ì„œ ë‚ ë¼ê°ˆë•Œë„ ì•Œì•„ì„œ ë©”ëª¨ë¦¬ë¥¼ ì²˜ë¦¬í•´ì¤Œ

**2. ì†Œë©¸ìì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§€ë©´ ì•ˆë¨**

```cpp
#include <iostream>
#include <memory>
using namespace std;

class A
{
public:
	~A()
	{
		throw "eroor";  // ê¸ˆì§€
	}
};

int main()
{
	try
	{
		A a; 
	}
	catch (...)
	{
		cout << "Catch" << endl;
	}
	return 0;
}
```

- ëŸ°íƒ€ì„ì—ëŸ¬
- ì†Œë©¸ìëŠ” ë©”ëª¨ë¦¬ì— ìˆëŠ”ê±¸ ì‹¹ì§€ìš°ê³  ë‚ ë ¤ë²„ë¦¬ëŠ” ê²½ìš°ì´ê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ `"eroor"` ë¥¼ ë˜ì§ˆìˆ˜ ìˆëŠ”ìƒí™©ì´ ì•„ë‹ˆë¼ê³  ë³´ëŠ”ê²ƒ
- ì†Œë©¸ìì—ì„  ì˜ˆì™¸ë¥¼ ë˜ì§ˆìˆ˜ ì—†ìŒ

___

**3. forë¬¸ ì•ˆìª½ì—ì„œ ë¹ˆë²ˆí•˜ê²Œ try-catchí•˜ëŠ” ê²ƒì€ í¼í¬ë¨¼ìŠ¤ì— ì•ˆì¢‹ìŒ**

- try-catch ë¬¸ì€  ì—¬ëŸ¬ ìŠ¤íƒì„ ì™”ë‹¤ ê°”ë‹¤ í•˜ê¸°ë„ í•˜ê¸° ë•Œë¬¸ì— ì—°ì‚°ì´ ëŠë¦¼
- zero-cost exception

___

**4. ëª¨ë“  ì˜¤ë¥˜ë¥¼ ì˜ˆì™¸ì²˜ë¦¬ë¡œ ì¡ìœ¼ë ¤ê³  í•˜ì§€ ì•Šê¸°**

- ì˜¤ë¥˜í•˜ê³  ì˜ˆì™¸ëŠ” ë‹¤ë¦„
- ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì€ ifë¬¸ ë“±ìœ¼ë¡œ ê±¸ëŸ¬ì„œ ë°›ëŠ”ê²ƒì´ ì¢‹ìŒ
  - ì‚¬ìš©ì ì…ë ¥ë“±ì„ ë‹¤ì‹œ ì…ë ¥ë°›ë„ë¡ í•˜ëŠ” ê²ƒ
- ë„¤íŠ¸ì›Œí¬ ì„œë²„ ëŒë¦´ë•Œ, ë¶„ì‚°ì²˜ë¦¬, ë³‘ë ¬ì²˜ë¦¬ ë“± í•˜ë“œì›¨ì–´, í•˜ë“œë””ìŠ¤í¬ì— ì½ê³ ì“°ê¸°í• ë•Œë“± ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ê¸°
- ë…¼ë¦¬ì ìœ¼ë¡œ ì˜ˆì¸¡ì´ ì–´ë ¤ìš´ ê²½ìš°ì—” ì˜ˆì™¸ë¥¼ ì“°ëŠ” ê²ƒì´ ì¢‹ìŒ

# ğŸ“Œì°¸ì¡°ë§í¬
ì¸í”„ëŸ° **ë”°ë¼í•˜ë©´ì„œ ë°°ìš°ëŠ” C++** - [https://www.inflearn.com/course/following-c-plus](https://www.inflearn.com/course/following-c-plus)