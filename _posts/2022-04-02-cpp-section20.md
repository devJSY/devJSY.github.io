---
published: true
title:  "따라하며 배우는 C++ Section 20. 중급 프로그래머들의 상식"
excerpt: ""

categories:
  - 따배씨++
tags:
  - [C++]

toc: true
toc_sticky: true
 
date: 2022-05-10
last_modified_at: 2022-05-10
---

# 🤔 학습목표
- 따라하며 배우는 C++ Section 20. 중급 프로그래머들의 상식

# 📃 학습내용
## 📍 **따라하며 배우는 C++ Section 20. 중급 프로그래머들의 상식**

### **🌱 20.1 비쥬얼 스튜디오로 프로파일링 하기**

- **프로파일링:** cpu사용량을 알아보는것
  - 최적화시 많이 사용함
- 메모리 프로파일링을 켜놓고 cpu를 같이 돌리면 연산시간 측정시 정확도가 떨어지는 경우가 있음
  - 정확한 프로파일링시 메모리따로, cpu따로 측정하는것이 좋음
- 디버그모드
  - 디버깅에 필요한 정보를 모으기 때문에 코드를 좀더 자세히 분석할수 있지만 퍼포먼스가 릴리즈모드와 다를수 있음 
- 릴리즈모드
  - 디버그 - 성능 프로파일러(Alt + F2)
    - 사용 가능한 도구
      - 강제종료시키면 강제종료시킬때까지 프로파일링이 됨
  - 전체적으로 한눈에 메모리 사용량을 보기 편함
    - 총cpu : 함수가 함수를 호출할때 포함되는 연산량까지 전부 포함한 값
    - 셀프CPU : 함수가 함수를 호출할때 자신의 연산량만 표시
___

```cpp
#include <iostream>

using namespace std;

void func1()
{
	long long sum = 0;
	for (unsigned i = 0; i < 1000'000; ++i)
		sum += i;

	cout << sum << endl;
}

void func2()
{
	long long sum = 0;
	for (unsigned i = 0; i < 1000'000'000; ++i)
		sum += i;

	cout << sum << endl;
}

void run()
{
	func1();
	func2();
}

int main()
{

	run();

	int* d = new int[10000];
	float* f = new float[100];

	delete[] d;
	delete[] f;

	return 0;
}
```

1. Brake Point 를 사용
   - 함수 시작 전, 후로 찍기(실제로는 브레이크 포인트가 밑으로 이동함) 
2. 진단도구 사용(Debug 모드에서 실행하면 자동으로 켜짐)
   - 디버그 - 창 - 진단 도구 표시(Ctrl + Alt + F2)
3. 계속 버튼 누르기
   - 측정을 하면서 감 

```cpp
499999500000
499999999500000000
```

4. 브레이크포인트를 만나서 멈춰있는 상태


- main 함수를 실행하기 위한 것들이 숨어있음
  - mainCRTstartup ... 
  - 프로파일링시 신경안써도됨
___

**진단도구**

- 프로세스 메모리
  - 사용한 메모리 총량, 시간 
- CPU (모든 프로세서에 대한 비율(%))
  - 멀티쓰레딩으로 만든 프로그램이 아니기 때문에 코어가 많은 cpu면 사용량이 작아보임

<br>

- CPU 사용량 탭
  - CPU 프로파일링 버튼 
  - 정밀한 데이터를 볼때사용
  - 상위함수 - 함수 이름 - cpu 사용량 
    - `%` 로 표시됨
  - 호출자/호출 수신자 탭
    - 호출함수, 현재함수, 호출된 함수 를 볼수있음
    - 전체 연산량의 `%` 단위로 볼수있음 
      - ms 단위로 같이 표시됨
- 요약 탭
  - CPU 프로필 기록
- 메모리 사용량
  - 힙 프로파일링(요약탭에서 힙 프로파일링 사용버튼)
    - 키고 끄고 하는것에 메모리 사용량의 영향이 큼
    - CPU 사용량에 영향이 있을수 있음
      - 대부분의 경우 크게 영향없음
    - 보통 프로파일링시 힙 프로파일링을 많이 사용함
  - 스냅샷 만들기
    - 현재상태에서 메모리가 어떤상태인지 보여줌
    - 계속 버튼을 누른뒤 스냅샷을 한번더 누르면 `할당(차이)` 란에 클릭 표시가 뜸
      - 기본 메모리를 추적하는 버튼임

___

**최적화시 8:2의 법칙**

- 연산량의 80% 를 전체코드의 20%를 차지하는것이 일반적임
- 모든곳을 최적화를하려면 힘듬
- 가장느린곳 에 80%의 노력을 기울여 최적화 하는것이 일반적임

___

**최적화**

- 보통은 알고리즘을 하는 레벨에서 최적화를 진행하는것이 효율이 높음
- 프로그래밍 스킬에서 최적화를하는것은 한계가있고 알고리즘 레벨에서 최적화를 하는것이 좋은 소프트웨어 개발자임
- 비주얼 스튜디오의 프로파일러로 가장 연산량이 많은곳을 쉽게 찾을수 있음

### **🌱 **

### **🌱 **

### **🌱 **

### **🌱 **


# 📌참조링크
인프런 **따라하면서 배우는 C++** - [https://www.inflearn.com/course/following-c-plus](https://www.inflearn.com/course/following-c-plus)

**공부하는 식빵맘 👱‍♀️ 님의 블로그** - [https://ansohxxn.github.io/](https://ansohxxn.github.io/)